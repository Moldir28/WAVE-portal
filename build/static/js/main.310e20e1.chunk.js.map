{"version":3,"sources":["App.js","index.js"],"names":["App","useState","currentAccount","setCurrentAccount","allWaves","setAllWaves","message","setMessage","contractABI","abi","getAllWaves","a","window","ethereum","provider","ethers","providers","Web3Provider","signer","getSigner","wavePortalContract","Contract","waves","wavesCleaned","forEach","wave","push","address","waver","timestamp","Date","on","from","console","log","prevState","checkIfWalletIsConnected","request","method","accounts","length","account","connectWallet","alert","getTotalWaves","count","toNumber","gasLimit","waveTxn","hash","wait","useEffect","className","type","id","placeholder","value","onChange","e","target","onClick","map","index","toDateString","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.310e20e1.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport './App.css';\nimport { ethers } from \"ethers\";\nimport abi from './utils/WavePortal.json'\n\nconst App = () => {\n  const [currentAccount, setCurrentAccount] = useState(\"\");\n  const [allWaves, setAllWaves] = useState([]);\n  const [message, setMessage] = useState(\"\")\n\n  const contractAddress = \" 0x0f7BEc5776B31fED1619E1fb2C31D41bD1f3e541\";\n\n  const contractABI = abi.abi;\n\n  const getAllWaves = async () => {\n    try {\n      const { ethereum } = window\n      if (ethereum) {\n        const provider = new ethers.providers.Web3Provider(ethereum);\n        const signer = provider.getSigner();\n        const wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n\n        const waves = await wavePortalContract.getAllWaves();\n\n        const wavesCleaned = [];\n        waves.forEach(wave => {\n          wavesCleaned.push({\n            address: wave.waver,\n            timestamp: new Date(wave.timestamp * 1000),\n            message: wave.message,\n          })\n        })\n\n        setAllWaves(wavesCleaned)\n\n        wavePortalContract.on(\"NewWave\", (from, timestamp, message) => {\n          console.log(\"NewWave\", from, timestamp, message);\n\n          setAllWaves(prevState => [...prevState, {\n            address: from,\n            timestamp: new Date(timestamp * 1000),\n            message: message\n          }]);\n        });\n      } else {\n        console.log(\"Ethereum object doesn't exist!\")\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const checkIfWalletIsConnected = async () => {\n    try {\n      const { ethereum } = window;\n\n      if (!ethereum) {\n        console.log(\"Make sure you have metamask!\");\n        return;\n      } else {\n        console.log(\"We have the ethereum object\", ethereum);\n      }\n\n      const accounts = await ethereum.request({ method: 'eth_accounts' });\n\n      if (accounts.length !== 0) {\n        const account = accounts[0];\n        console.log(\"Found an authorized account:\", account);\n        setCurrentAccount(account);\n        getAllWaves();\n      } else {\n        console.log(\"No authorized account found\")\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const connectWallet = async () => {\n    try {\n      const { ethereum } = window;\n\n      if (!ethereum) {\n        alert(\"Get MetaMask!\");\n        return;\n      }\n\n      const accounts = await ethereum.request({ method: \"eth_requestAccounts\" });\n\n      console.log(\"Connected\", accounts[0]);\n      setCurrentAccount(accounts[0]);\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const wave = async () => {\n    try {\n      const { ethereum } = window;\n\n      if (ethereum && message) {\n        const provider = new ethers.providers.Web3Provider(ethereum);\n        const signer = provider.getSigner();\n        const wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n\n        let count = await wavePortalContract.getTotalWaves();\n        console.log(\"Retrieved total wave count...\", count.toNumber());\n\n        const waveTxn = await wavePortalContract.wave(message, { gasLimit: 300000 });\n\n        console.log(\"Mining...\", waveTxn.hash);\n\n        await waveTxn.wait();\n        console.log(\"Mined -- \", waveTxn.hash);\n        setMessage(\"\");\n\n        count = await wavePortalContract.getTotalWaves();\n        console.log(\"Retrieved total wave count...\", count.toNumber());\n      } else {\n        console.log(\"Ethereum object doesn't exist!\");\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n\n  useEffect(() => {\n    checkIfWalletIsConnected();\n  }, [])\n\n  return (\n    <div className=\"mainContainer\">\n      <div className=\"dataContainer\">\n        <div className=\"header\">\n          Hi Peeps!\n        </div>\n\n        <div className=\"bio\">\n          I am Moldyr and I am super excited to get onboard the Blockchain spaceshipðŸš€ <br /> Connect your Ethereum wallet and wave at me!\n        </div>\n        <input\n          type=\"text\"\n          id=\"waveText\"\n          className=\"waveText\"\n          placeholder=\"Send me a link to something interesting about Solidity:)\"\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n        />\n\n        <button className=\"waveButton\" onClick={wave}>\n          wave at me ðŸ‘‹\n        </button>\n\n        {!currentAccount && (\n          <button className=\"waveButton\" onClick={connectWallet}>\n            Connect Wallet\n          </button>\n        )}\n\n        {allWaves.length > 0 && (\n          <div className=\"wavers\">\n            <h1>Look who else waved ðŸ™Œ</h1>\n            {allWaves.map((wave, index) => (\n              <div className=\"waversList\">\n                <em>{wave.address}</em><br />\n                <p>{wave.message}</p> waved on{\" \"}\n                <em>{wave.timestamp.toDateString()}</em>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}